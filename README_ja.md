# pz_cura_gcode_preview

3Dプリンティング愛好者とプロフェッショナル向けの高度な機能を備えた、リアルタイムGCODEレイヤープレビューと分析のための強力なCuraプラグイン。**ARCモーションコマンド（G2/G3）の検証とGCODEファイル内の温度/流量調整の監視に最適です。**

## 🌐 言語サポート

- 🇺🇸 [English](README.md)
- 🇹🇼 [繁體中文](README_zh_TW.md)
- 🇯🇵 [日本語](README_ja.md) (現在の言語)

## 🎥 デモ動画

プラグインの動作をご覧ください：

[![pz_cura_gcode_preview デモ](https://img.youtube.com/vi/m4raWx0PiOg/maxresdefault.jpg)](https://youtu.be/m4raWx0PiOg)

*上記の動画をクリックして、プラグイン機能の完全なデモンストレーションをご覧ください*

## 📋 機能

- **リアルタイムレイヤープレビュー**：現在の印刷レイヤーとステップをリアルタイムで監視
- **GCODEコマンド分析**：各レイヤーとステップの詳細なGCODEコマンドを表示
- **ARCモーション検証**：**G2/G3アークコマンドが円形運動を正しく実装しているかチェック**
- **温度・流量監視**：**温度調整と流量変化をリアルタイムで監視**
- **自動スクロール制御**：現在のレイヤーコマンドへの自動スクロールを切り替え
- **一時GCODEストレージ**：現在のCura GCODEを一時ファイルとして保存
- **ファイル管理**：GCODEファイルの簡単な選択と管理
- **多言語サポート**：日本語インターフェース、Microsoft JhengHeiフォント使用
- **プロフェッショナルUI**：クリーンでモダンなインターフェース、直感的なコントロール

## 🚀 インストール

### 前提条件
- Creality Slicer 4.8 または互換性のあるCuraベースのスライサー
- Python 3.x（Curaに含まれています）
- PyQt5（Curaに含まれています）

### インストール手順

1. **プラグインのダウンロード**
   ```bash
   git clone https://github.com/pzman3d/pz_cura_gcode_preview.git
   ```

2. **Curaプラグインディレクトリにコピー**
   - Curaプラグインディレクトリに移動：
     - **Windows**: `%APPDATA%\Creality Slicer\4.8\plugins\`
     - **macOS**: `~/Library/Application Support/Creality Slicer/4.8/plugins/`
     - **Linux**: `~/.local/share/cura/4.8/plugins/`

3. **プラグインのインストール**
   - `LayerPreviewPlugin` フォルダをプラグインディレクトリにコピー
   - Creality Slicerを再起動

4. **インストールの確認**
   - Creality Slicerを開く
   - `拡張機能` → `pz_cura_gcode_preview` → `レイヤープレビューを表示` に移動
   - プラグインウィンドウが正常に開くはずです

## 📖 使用ガイド

### クイックスタート

> **💡 ヒント**：上記の[デモ動画](https://youtu.be/m4raWx0PiOg)を視聴して、すべての機能の視覚的なウォークスルーをご覧ください！

### 基本的な使用方法

1. **プラグインを開く**
   - Creality Slicerを起動
   - 3Dモデルを読み込み、スライスを実行
   - `拡張機能` → `pz_cura_gcode_preview` → `レイヤープレビューを表示` に移動

2. **レイヤー情報を表示**
   - プラグインは現在のレイヤー、ステップ、総レイヤー数を表示
   - 情報は500ミリ秒ごとに自動更新

3. **GCODEファイルを読み込み**
   - `GCODEファイルを選択` をクリックしてGCODEファイルを読み込み
   - または `一時GCODEを保存` を使用して現在のCura GCODEを保存

### 高度な機能

#### 自動スクロール制御
- **自動スクロールを有効化**：現在のレイヤーコマンドに自動ジャンプ
- **自動スクロールを無効化**：表示を凍結、手動スクロールを許可
- `自動スクロール` チェックボックスで切り替え

#### 一時GCODE管理
- **一時GCODEを保存**：現在のCura GCODEを `GCODE_temp` フォルダに保存
- **一時GCODEを削除**：すべての一時GCODEファイルを削除
- ファイルは保存後に自動的に読み込まれます

#### GCODEコマンド分析
- 各レイヤーの詳細なGCODEコマンドを表示
- 現在のステップのコマンドがハイライト表示
- 形式：`( レイヤー X / ステップ Y ) GCODE_コマンド`
- 表示範囲でコマンド数とスコープを表示

#### 🔍 ARCモーション検証
- **G2/G3アークコマンド**：円形運動コマンドが正しく生成されているか検証
- **スムーズな曲線**：スライサーが線形セグメントではなくアークコマンドを使用しているかチェック
- **プリント品質**：目に見えるレイヤーラインのない滑らかな曲面を確保
- **ファイルサイズ**：効率的なアークコマンドを使用してGCODEファイルサイズを削減

#### 🌡️ 温度・流量監視
- **温度変化**：M104/M109温度設定コマンドを監視
- **流量調整**：M221流量変更コマンドを追跡
- **レイヤー遷移**：レイヤー間の温度変化を識別
- **プリント最適化**：より良い結果のために温度と流量パターンを分析

### インターフェース要素

| 要素 | 説明 |
|------|------|
| **現在のレイヤー情報** | 現在のレイヤー、ステップ、総レイヤー数を表示 |
| **GCODEファイルパス** | 現在読み込まれているGCODEファイルパスを表示 |
| **GCODEファイルを選択** | GCODEファイルをブラウズして読み込み |
| **一時GCODEを保存** | 現在のCura GCODEを一時ファイルとして保存 |
| **一時GCODEを削除** | すべての一時GCODEファイルを削除 |
| **自動スクロール** | 現在のコマンドへの自動スクロールを切り替え |
| **GCODEコマンド** | GCODEコマンドのスクロール可能な表示 |
| **ステータスバー** | 現在の操作ステータスを表示 |

## 🔧 設定

### 自動スクロール設定
- **有効**：現在のレイヤーコマンドに自動スクロール
- **無効**：表示を凍結、手動ナビゲーションを許可
- 状態はセッション間で保持

### ファイル管理
- 一時ファイルは `GCODE_temp` フォルダに保存
- ファイルはタイムスタンプで命名：`GCODE_temp_YYYYMMDD_HHMMSS.gcode`
- `一時GCODEを削除` ボタンで自動クリーンアップ可能

## 🐛 トラブルシューティング

### よくある問題

**拡張機能メニューにプラグインが表示されない**
- プラグインが正しいディレクトリにあることを確認
- Creality Slicerを再起動
- ファイル権限を確認

**GCODE表示が更新されない**
- GCODEファイルが読み込まれていることを確認
- 自動スクロールが有効になっているかチェック
- Curaがスライスを完了していることを確認

**一時ファイルが保存されない**
- プラグインディレクトリの書き込み権限を確認
- 十分なディスク容量があることを確認
- CuraがGCODEを生成していることを確認

**ARCコマンドが表示されない**
- Curaで「Arc Welder」プラグインを有効化
- モデルに曲面があるかチェック
- スライサー設定でアーク生成を確認

**温度コマンドが見えない**
- GCODEにM104/M109コマンドが含まれていることを確認
- Curaで温度設定が有効になっているかチェック
- マテリアルプロファイルに温度設定があることを確認

### デバッグ情報
- Curaでデバッグログを有効化
- コンソール出力でエラーメッセージを確認
- プラグインはトラブルシューティングのためにすべての操作をログに記録

## 📁 ファイル構造

```
LayerPreviewPlugin/
├── LayerPreviewPlugin.py    # メインプラグインファイル
├── __init__.py              # プラグイン初期化
├── plugin.json              # プラグインメタデータ
├── GCODE_temp/              # 一時GCODEストレージ
│   └── GCODE_temp_*.gcode   # 一時ファイル
└── README_ja.md             # このファイル
```

## 🤝 貢献

貢献を歓迎します！以下の手順に従ってください：

1. リポジトリをフォーク
2. 機能ブランチを作成 (`git checkout -b feature/amazing-feature`)
3. 変更をコミット (`git commit -m 'Add amazing feature'`)
4. ブランチにプッシュ (`git push origin feature/amazing-feature`)
5. Pull Requestを開く

### 開発設定
1. リポジトリをクローン
2. 開発依存関係をインストール
3. 変更を加える
4. 徹底的にテスト
5. pull requestを送信

## 📄 ライセンス

このプロジェクトはMITライセンスの下でライセンスされています - 詳細は[LICENSE](LICENSE)ファイルをご覧ください。

## 👨‍💻 作者

**pzman3d**
- メール：pzman3d@gmail.com
- GitHub：[@pzman3d](https://github.com/pzman3d)

## 🙏 謝辞

- 優れたスライシングエンジンを提供してくれたCura開発チーム
- ユーザーフレンドリーなインターフェースを提供してくれたCreality
- フィードバックと提案をしてくれた3Dプリンティングコミュニティ

## 📞 サポート

問題が発生した場合や質問がある場合：

1. [デモ動画](https://youtu.be/m4raWx0PiOg)を視聴して視覚的ガイダンスを得る
2. [トラブルシューティング](#-トラブルシューティング)セクションを確認
3. 既存の[Issues](https://github.com/pzman3d/pz_cura_gcode_preview/issues)を検索
4. 詳細な説明で新しいissueを作成
5. 連絡先：pzman3d@gmail.com

## 🔄 バージョン履歴

### v1.0.0
- 初期リリース
- リアルタイムレイヤープレビュー
- GCODEコマンド分析
- **ARCモーション検証（G2/G3コマンド）**
- **温度・流量監視**
- 自動スクロール制御
- 一時ファイル管理
- 日本語インターフェース
- Microsoft JhengHeiフォントサポート

---

**3Dプリンティングコミュニティのために作られました ❤️**
